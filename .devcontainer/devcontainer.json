{
    "name": "Arduino CLI DevContainer",

    "workspaceMount": "source=${localWorkspaceFolder},target=/workspace,type=bind",
    "workspaceFolder": "/workspace",

    "build": {
        "dockerfile": "Dockerfile",
        "args": {
            "VARIANT": "ubuntu-24.04",
            "ARDUINO_CLI_VERSION": "1.3.1"
        }
    },

    "remoteUser": "vscode",
    
    "mounts": [
        "source=vsCodeExtCache-arduino,target=/root/.vscode-server/extensions,type=volume",
        "source=arduino15-data,target=/home/vscode/.arduino15,type=volume"
    ],


    "postStartCommand": "/home/vscode/.config/init_arduino-cli.sh",

    "runArgs": [
        "--privileged",
        "-v",
        "/dev/bus/usb:/dev/bus/usb"
    ],

    "customizations": {
        "vscode": {
            "extensions": [
                "vscode-arduino.vscode-arduino-community"
            ]
        }
    }
}
